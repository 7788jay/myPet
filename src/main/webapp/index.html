<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
    <!-- bootstrap & fontawesome样式 -->
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/assets/css/font-awesome.min.css"/>
    <!-- ace主题样式 -->
    <link rel="stylesheet" href="/assets/css/ace.min.css"/>
    <!--[if lte IE 9]>
    <link rel="stylesheet" href="/assets/css/ace-part2.min.css"/>
    <![endif]-->
    <link rel="stylesheet" href="/assets/css/ace-skins.min.css"/>
    <link rel="stylesheet" href="/assets/css/ace-rtl.min.css"/>
    <!--[if lte IE 9]>
    <link rel="stylesheet" href="/assets/css/ace-ie.min.css"/>
    <![endif]-->
    <!--插件样式 -->
    <link rel="stylesheet" href="/libs/zTree/css/zTreeStyle/zTreeStyle.css"/>
    <link rel="stylesheet" href="/libs/qtip/jquery.qtip.min.css"/>
    <link rel="stylesheet" href="/libs/uploadify/uploadify.css"/>
    <!--通用样式 -->
    <link rel="stylesheet" href="/css/common.css"/>
    <!-- ace settings handler -->
    <script src="/assets/js/ace-extra.min.js"></script>
    <!--[if lte IE 8]>
    <script src="/assets/js/html5shiv.js"></script>
    <script src="/assets/js/respond.min.js"></script>
    <![endif]-->
</head>
<body class="no-skin" ms-controller="QKYADMIN">
<!-- 导航栏 -->
<div class="navbar" id="header">
    <div id="navbar-container" class="navbar-container">
        <!-- 标题栏 -->
        <div class="navbar-header pull-left">
            <a href="#" class="navbar-brand">
                <small>宠物商店&nbsp;<strong>·</strong>&nbsp;&nbsp;管理平台
                </small>
            </a>
        </div>
        <!-- 按钮栏 -->
        <div class="navbar-buttons navbar-header pull-right ">
            <ul class="nav ace-nav">
                <li class="transparent"><a href="javascript:void(0);">{{agencyName}} </a></li>
                <li class="transparent"><a href="javascript:void(0);"><i class="ace-icon glyphicon glyphicon-user"></i>&nbsp;<span>[{{userName}}  {{userRole}}]</span></a>
                </li>
                <li class="transparent"><a href="javascript:void(0);" ms-click="logout" title="返回工作台"><img
                        src="/images/icon_a2.png"/></a>
                </li>
            </ul>
        </div>
    </div>
</div>
<!-- 主容器 -->
<div class="main-container" id="main-container">
    <!-- 菜单栏 -->
    <div class="sidebar responsive-min" id="sidebar">
        <script type="text/javascript">
            try {
                ace.settings.check('sidebar', 'fixed')
            } catch (e) {
            }
        </script>
        <!-- 快捷按钮 -->
        <!--        <div class="sidebar-shortcuts" id="sidebar-shortcuts">
                </div>-->
        <!-- 菜单列表 -->
        <ul class="nav nav-list">
            <li><a data-url="/welcome.html" href="#/welcome.html"><i class="menu-icon fa fa-home">
            </i><span class="menu-text">主页</span> </a><b class="arrow"></b></li>
            <li><a href="javascript:void(0)" class="dropdown-toggle"><i class="menu-icon fa fa-cog"></i><span
                    class="menu-text">系统管理</span><b class="arrow fa fa-angle-down"></b> </a><b class="arrow">
            </b>
                <ul class="submenu">
                    <li>
                        <a data-url="/menu/listTopMenu.html" href="#/menu/listTopMenu.html">
                        <i class="menu-icon fa fa-caret-right"></i>用户管理 </a>
                        <b class="arrow"></b>
                    </li>
                    <li>
                        <a data-url="/appCategory/listAppCategory.html" href="#/appCategory/listAppCategory.html">
                        <i class="menu-icon fa fa-caret-right"></i>宠物分类管理 </a>
                        <b class="arrow"></b>
                    </li>
                    <li>
                        <a data-url="/appFunction/listAppFunction.html" href="#/appFunction/listAppFunction.html">
                        <i class="menu-icon fa fa-caret-right"></i>宠物信息管理 </a>
                        <b class="arrow"></b>
                    </li>
                    <li>
                        <a data-url="/project/listProject.html" href="#/project/listProject.html">
                        <i class="menu-icon fa fa-caret-right"></i>订单信息管理 </a>
                        <b class="arrow"></b>
                    </li>
                </ul>
            </li>
        </ul>
        <!-- 菜单底部 -->
        <div class="sidebar-toggle sidebar-collapse" id="sidebar-collapse">
            <i class="ace-icon fa fa-angle-double-left" data-icon1="ace-icon fa fa-angle-double-left"
               data-icon2="ace-icon fa fa-angle-double-right"></i>
        </div>
        <script type="text/javascript">
            try {
                ace.settings.check('sidebar', 'collapsed')
            } catch (e) {
            }
        </script>
    </div>
    <!-- 主内容 -->
    <div class="main-content">
        <!-- 面包屑 -->
        <div class="breadcrumbs" id="breadcrumbs">
            <script type="text/javascript">
                try {
                    ace.settings.check('breadcrumbs', 'fixed')
                } catch (e) {
                }
            </script>
            <ul class="breadcrumb">
                <li><i class="ace-icon fa fa-home home-icon"></i>&nbsp;<a data-url="/welcome.html"
                                                                          href="#/welcome.html">主页</a></li>
            </ul>
            <div id="nav-search" class="nav-search">
                              <span class="label label-xlg label-light arrowed arrowed-right"><i
                                      class="menu-icon fa fa-calendar">
                              </i>&nbsp;&nbsp;今天：{{currentDate | date}}</span>
            </div>
        </div>
        <!-- 页面内容 -->
        <div class="page-content">
            <!-- /section:settings.box -->
            <div class="page-content-area">
            </div>
            <!-- /.page-content-area -->
        </div>
        <!-- /页面内容 -->
    </div>
    <!-- /主内容 -->
</div>

<!-- 基础脚本 -->
<!--[if !IE]> -->
<script type="text/javascript">
    window.jQuery || document.write("<script src='/assets/js/jquery.min.js'>" + "<" + "/script>");
</script>
<!-- <![endif]-->
<!--[if IE]>
<script type="text/javascript">
    window.jQuery || document.write("<script src='/assets/js/jquery1x.min.js'>" + "<" + "/script>");
</script>
<![endif]-->
<!-- bootstrap 脚本 -->
<script src="/assets/js/bootstrap.min.js"></script>
<!-- ace 脚本 -->
<script src="/assets/js/ace-elements.min.js"></script>
<script src="/assets/js/ace.min.js"></script>
<!--插件脚本-->
<script src="/libs/jquery/jquery.cookie.js"></script>
<script src="/libs/avalon/avalon.shim.min.js"></script>
<script src="/libs/layer/layer.js"></script>
<script src="/libs/zTree/js/jquery.ztree.all-3.5.js"></script>
<script src="/libs/zTree/js/jquery.ztree.exhide-3.5.min.js"></script>
<script src="/assets/js/jquery.validate.min.js"></script>
<script src="/libs/qtip/jquery.qtip.min.js"></script>
<script src="/libs/uploadify/jquery.uploadify.min.js"></script>
<script src="/libs/store/store.min.js"></script>
<!--通用脚本-->
<script src="/js/common.js"></script>
<script type="text/javascript">

    /*ajax内容加载*/
    jQuery(function ($) {
        if ('enable_ajax_content' in ace) {
            var options = {
                content_url: function (url) {
                    if (url.indexOf("login") >= 0) {
                        return false;
                    }
                    return "/html" + url;
                },
                default_url: '/welcome.html',
                loading_icon: "fa-spinner fa-2x blue"
            }
            ace.enable_ajax_content($, options)
        }
    })

    var QKYADMIN = avalon.define({
        $id: "QKYADMIN",
        htmlRoot: '/html',
        currentDate: new Date(),
        userName: "",
        agencyName: "",
        userRole: "",
        //打开loading
        openLoading: function () {
            layer.load(2);
        },
        //关闭loading
        closeLoading: function () {
            layer.closeAll('loading');
        },
        //读取参数
        getParam: function (name) {
            return JSON.parse($(".layui-layer-content #param").val())[name];
        },
        //打开弹窗
        openDialog: function (url, data, title, width, height, callBack) {
            $.post(QKYADMIN.htmlRoot + url, {}, function (html) {
                var str = JSON.stringify(data);
                var hidden = "<input id='param' type='hidden' value='" + str + "' />";
                layer.open({
                    type: 1,
                    title: title,
                    shift: 2,
                    moveEnd: function () {
                        closeAllTip();
                    },
                    cancel: function () {
                        //取消时重置回调，避免刷新
                        callBack = function () {
                        };
                    },
                    end: function () {
                        closeAllTip();
                        //为了保存后刷新
                        callBack();
                    },
                    shadeClose: false,
                    content: html + hidden,
                    area: [width, height]
                });
            });
        },
        //退出弹窗（保存）
        closeDialog: function () {
            layer.closeAll('page');
        },
        //取消弹窗
        cancelDialog: function () {
            $(".layui-layer-close").trigger("click");
        },
        //初始化
        init: function () {
            //初始化信息
            var isLoaded = sessionStorage.getItem("isLoad");
            if (!isLoaded) {
                window.location = ("/login.html");
            }
            getRoleData();
            getAppCategoryData();
            $.ajax({
                url: "/admin/qky/common/getCurrentUser",
                type: "get",
                dataType: "json",
                success: function (res) {
                    if (isSuccess(res)) {
                        QKYADMIN.userRole = res.bizData.userRole;
                        QKYADMIN.agencyName = res.bizData.agencyName;
                        QKYADMIN.userName = res.bizData.name;
                    }
                }
            });
        },
        //退出
        logout: function () {
            store.clear();
            sessionStorage.clear();
            window.location = "/admin/logout";
        }
    });
    avalon.scan();
//    QKYADMIN.init();
</script>
<!-- /主容器 -->
</body>
</html>