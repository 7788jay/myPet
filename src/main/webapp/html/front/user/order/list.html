<!-- begin收货地址 -->
<div ms-important="listOrders" id="listOrders" class="col-md-9 col-sm-7">
    <div class="product-page" ms-repeat="data" style="margin-bottom: 15px;padding: 5px;border:1px solid #67bd3c;">
        <div class="row">
            <!-- BEGIN CONTENT -->
            <div class="col-md-12 col-sm-12">
                <div class="col-md-12 col-sm-12" style="padding-bottom:10px;border-bottom: 1px dotted rgba(0, 0, 0, 0.33);">
                    <div class="user-order">创建时间：<span>{{el.createTime | date}}</span></div>
                    <div class="user-order">订单编号：<span>{{el.code}}</span></div>
                    <div class="user-order">订单状态：
                        <span ms-if="el.payTime">已支付，{{el.status | OrderStatusFilter}}</span>
                        <span ms-if="!el.payTime">
                            未支付
                            <a class="btn btn-warning" ms-attr-href="order-success.html?orderCode={{el.code}}" type="button">
                                <i class="fa fa-hand-o-right"> 去支付</i>
                            </a>
                        </span>
                    </div>
                </div>
                <div class="goods-page">
                    <div class="goods-data clearfix" style="margin: 0px;padding: 5px;">
                        <div class="table-wrapper-responsive">
                            <table summary="Shopping cart">
                                <tr>
                                    <th class="goods-page-image">图片</th>
                                    <th class="goods-page-description">宠物名</th>
                                    <th class="goods-page-quantity">重量</th>
                                    <th class="goods-page-price">单价</th>
                                    <th class="goods-page-quantity">数量</th>
                                    <th class="goods-page-total">总价</th>
                                </tr>
                                <tr ms-repeat="el.itemExs" data-repeat-rendered="layoutInit">
                                    <td class="goods-page-image">
                                        <a ms-attr-href="item.html?code={{el.pet.code}}">
                                            <img ms-attr-src="el.pet.image.split(',')[0]">
                                        </a>
                                    </td>
                                    <td class="goods-page-description">
                                        <h3><a ms-attr-href="item.html?code={{el.pet.code}}">{{el.pet.name}}</a></h3>
                                    </td>
                                    <td class="goods-page-price">
                                        <strong>{{el.pet.weight}} <span>KG</span></strong>
                                    </td>
                                    <td class="goods-page-price">
                                        <strong><span>￥</span>{{el.pet.price}}</strong>
                                    </td>
                                    <td class="goods-page-price">
                                        <strong>{{el.quantity}}</strong>
                                    </td>
                                    <td class="goods-page-total">
                                        <strong><span>￥</span>{{el.pet.price * el.quantity}}</strong>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="shopping-total">
                            <ul>
                                <li>
                                    <em>总计:</em>
                                    <strong class="price">
                                        <span>￥</span>{{el.totalPrice}}
                                    </strong>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!-- END CONTENT -->
        </div>
    </div>
    <!-- BEGIN PAGINATOR -->
    <div class="row">
        <div class="col-md-4 col-sm-4 items-info">总共{{records}}个订单</div>
        <div class="col-md-8 col-sm-8">
            <ul class="pagination pull-right">
                <li ms-if="page > 1"><a href="javascript:;" ms-click="query(page-1)">上一页</a></li>
                <li><span>{{page}}</span></li>
                <li ms-if="page < total"><a href="javascript:;" ms-click="query(page+1)">下一页</a></li>
            </ul>
        </div>
    </div>
    <!-- END PAGINATOR -->
</div>
<!--end 收货地址-->

<script type="text/javascript">
    jQuery(document).ready(function () {
        var listOrders = avalon.define({
            $id: "listOrders",
            data: [],
            page: "",     //当前页
            total: "",    //总页数
            records: "",   //总记录数

            //初始化
            init: function () {
                listOrders.query(1);
            },
            //分页查询
            query(pageNo){
                $.ajax({
                    url: "/pet/front/order/queryByUser?pageNo="+pageNo,
                    type: "GET",
                    dataType: "json",
                    success: function (result) {
                        listOrders.data = result.rows;
                        listOrders.page = result.page;
                        listOrders.total = result.total;
                        listOrders.records = result.records;
                    }
                });
            }
        });
        avalon.scan($('#listOrders')[0],listOrders);
        listOrders.init();
    });
</script>